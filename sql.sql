CREATE DATABASE BenhVien1
Go

USE BenhVien1
GO
 
CREATE TABLE NhanVien(
	MaNV CHAR(50) PRIMARY KEY,
	TenNV NVARCHAR(50),
	DiaChi NVARCHAR(50),
	GioiTinh NCHAR(50),
	NgaySinh DATE,
	SDT CHAR(50))
GO

CREATE TABLE KhoaDT(
	MaKhoa CHAR(50) PRIMARY KEY,
	TenKhoa NVARCHAR(50))
GO

CREATE TABLE KhoThuoc(
	MaKho CHAR(50) PRIMARY KEY,
	TenKho NVARCHAR(50))
GO

CREATE TABLE Thuoc( 
	MaThuoc CHAR(50) PRIMARY KEY,
	TenThuoc NVARCHAR(50),
	DonViTinh CHAR(50),
	DonGia FLOAT,
	NgaySanXuat DATE,
	HanSuDung DATE,
	SoLuongTon CHAR(50))
GO

CREATE TABLE NhaCungCap(
	MaNCC CHAR(50) PRIMARY KEY,
	TenNCC NVARCHAR(50),
	DiaChi NVARCHAR(50),
	SDT CHAR(50))
GO

CREATE TABLE PhieuDatMua(
	SoPhieuMua CHAR(50) PRIMARY KEY,
	NgayMua DATE,
	MaNV CHAR(50),
	MaNCC CHAR(50),
	FOREIGN KEY(MaNV) REFERENCES NhanVien(MaNV),
	FOREIGN KEY(MaNCC) REFERENCES NhaCungCap(MaNCC)
)
GO

CREATE TABLE ThuocDatMua(
	SoPhieuMua CHAR(50),
	MaThuoc CHAR(50),
	SoLuongMua VARCHAR(50),
	FOREIGN KEY(SoPhieuMua) REFERENCES PhieuDatMua(SoPhieuMua),
	FOREIGN KEY(MaThuoc) REFERENCES Thuoc(MaThuoc)
	)
GO

CREATE TABLE BangBaoGia(
	SoPhieuBG CHAR(50) PRIMARY KEY,
	MaNCC CHAR(50),
	NgayBG DATE,
	FOREIGN KEY(MaNCC) REFERENCES NhaCungCap(MaNCC)
)
GO

CREATE TABLE ThuocBaoGia(
	SoPhieuBG CHAR(50),
	MaThuoc CHAR(50)
	FOREIGN KEY(SoPhieuBG) REFERENCES BangBaoGia(SoPhieuBG),
	FOREIGN KEY(MaThuoc) REFERENCES Thuoc(MaThuoc)
)
GO

CREATE TABLE BienBanHuy(
	SoPhieuHuy CHAR(50) PRIMARY KEY,
	NgayBB DATE,
	MaNV CHAR(50),
	MaKho CHAR(50),
	FOREIGN KEY(MaNV) REFERENCES NhanVien(MaNV),
	FOREIGN KEY(MaKho) REFERENCES KhoThuoc(MaKho)
)
GO

CREATE TABLE ThuocHuy(
	SoPhieuHuy CHAR(50),
	MaThuoc CHAR(50),
	SoLuongHuy VARCHAR(50),
	FOREIGN KEY(MaThuoc) REFERENCES Thuoc(MaThuoc),
	FOREIGN KEY(SoPhieuHuy) REFERENCES BienBanHuy(SoPhieuHuy)
	)
go

CREATE TABLE PhieuNhap(
	SoPhieuNhap CHAR(50) PRIMARY KEY,
	NgayNhap DATE,
	MaNV CHAR(50),
	MaKho CHAR(50),
	MaKhoa CHAR(50),
	MaNCC CHAR(50),
	FOREIGN KEY(MaNV) REFERENCES NhanVien(MaNV),
	FOREIGN KEY(MaKho) REFERENCES KhoThuoc(MaKho),
	FOREIGN KEY(MaKhoa) REFERENCES KhoaDT(MaKhoa),
	FOREIGN KEY(MaNCC) REFERENCES NhaCungCap(MaNCC)
	)
GO

CREATE TABLE ThuocNhap(
	SoPhieuNhap CHAR(50),
	MaThuoc CHAR(50),
	SoLuong VARCHAR(50),
	FOREIGN KEY(SoPhieuNhap) REFERENCES PhieuNhap(SoPhieuNhap),
	FOREIGN KEY(MaThuoc) REFERENCES Thuoc(MaThuoc)
	)
	GO


CREATE TABLE PhieuXuat(
	SoPhieuXuat CHAR(50) PRIMARY KEY,
	NgayNhap DATE,
	MaNV CHAR(50),
	MaKho CHAR(50),
	MaKhoa CHAR(50),
	MaNCC CHAR(50),
	FOREIGN KEY(MaNV) REFERENCES NhanVien(MaNV),
	FOREIGN KEY(MaKho) REFERENCES KhoThuoc(MaKho),
	FOREIGN KEY(MaKhoa) REFERENCES KhoaDT(MaKhoa),
	FOREIGN KEY(MaNCC) REFERENCES NhaCungCap(MaNCC)
	)
GO


CREATE TABLE ThuocXuat(
	SoPhieuXuat CHAR(50),
	MaThuoc CHAR(50),
	SoLuong VARCHAR(50),
	FOREIGN KEY(SoPhieuXuat) REFERENCES PhieuXuat(SoPhieuXuat),
	FOREIGN KEY(MaThuoc) REFERENCES Thuoc(MaThuoc)
	)
	GO